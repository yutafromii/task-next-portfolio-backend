spring.application.name=task

# Renderの動的ポートに対応（ローカルは8080）
server.port=${PORT:8080}

# --- DB 接続（環境変数があればPostgres、なければH2にフォールバック） ---
# URL
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;MODE=PostgreSQL}
# ユーザー名/パスワード（H2は未指定でOK）
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:}
# ドライバ（環境変数があればPostgresドライバ、なければH2）
spring.datasource.driver-class-name=${SPRING_DATASOURCE_DRIVER:org.h2.Driver}

# スキーマ自動更新（最初はupdateでOK。落ち着いたらFlywayに移行推奨）
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:update}

# （任意）SQLログを見たい時だけtrueに
# spring.jpa.show-sql=true

# H2コンソール（ローカル用）
spring.h2.console.enabled=true

# --- CORS ---
# 本番は Render の環境変数 APP_CORS_ORIGIN に https://<your-app>.vercel.app を設定
app.cors.origin=${APP_CORS_ORIGIN:http://localhost:3000}

# （任意）Hikariの軽いチューニング
# spring.datasource.hikari.maximum-pool-size=5
# spring.datasource.hikari.connection-timeout=10000
# spring.datasource.hikari.idle-timeout=300000
# spring.datasource.hikari.max-lifetime=1200000
